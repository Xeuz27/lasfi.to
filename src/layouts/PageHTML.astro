---
import BaseHead from "../components/BaseHead.astro";
import {Layout} from "../components/Layout";

const {
  title,
  description,
  image = "/placeholder-social.jpg",
  lang = "es-MX",
  type = "article",
  date = "2021-01-01",
} = Astro.props;
---

<!DOCTYPE html>
<html lang={lang}>
  <head>
    <BaseHead
      title={title}
      description={description}
      image={image}
      date={date}
      type={type}
    />
  </head>

  <body class="fondo-pts w-screen text-texto-sft">
    <Layout client:idle>
      <slot />
    </Layout>
    <script>
      // get dark mode preference from local storage
      // const prefersDark: "enabled" | "disabled" = JSON.parse(
      //   localStorage.getItem("darkMode") || "disabled"
      // );

      function setThemePreference(value: "enabled" | "disabled") {
        const themeStr = JSON.stringify({
          darkMode: value,
        });

        localStorage.setItem("theme", themeStr);
      }

      setThemePreference("enabled");

      function getThemeFromLocalStorage() {
        const themeStr = localStorage.getItem("theme");
        if (!themeStr) {
          return null;
        }

        try {
          return JSON.parse(themeStr);
        } catch (err) {
          return null;
        }
      }

      console.log(getThemeFromLocalStorage());

      // function userPreferesDarkMode() {
      //   return prefersDark === "enabled";
      // }

      // function setThemePreference(value: "enabled" | "disabled") {
      //   localStorage.setItem("darkMode", value || "disabled");
      // }

      // const enableDarkMode = () => {
      //   document.body.classList.add("oscuro");
      // };

      // const disableDarkMode = () => {
      //   document.body.classList.remove("oscuro");
      // };

      // function setTheme() {

      //   if (userPreferesDarkMode()) {
      //     console.log("userPreferesDarkMode");
      //     enableDarkMode();
      //   } else {
      //     console.log("userPreferesLightMode");
      //     disableDarkMode();
      //   }
      // }

      // document.addEventListener("DOMContentLoaded", function (event) {

      //   setTheme();
      // });
    </script>
  </body>
</html>
